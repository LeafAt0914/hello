#享元模式
享元模式（Flyweight Pattern）主要用于减少创建对象的数量，以减少内存占用和提高性能。这种类型的设计模式属于结构型模式，它提供了减少对象数量从而改善应用所需的对象结构的方式。

享元模式尝试重用现有的同类对象，如果未找到匹配的对象，则创建新对象。我们将通过创建 5 个对象来画出 20 个分布于不同位置的圆来演示这种模式。由于只有 5 种可用的颜色，所以 color 属性被用来检查现有的 Circle 对象。

##概要
###意图
通过共享对象来减少创建大量相似对象时的内存消耗。。

###主要解决的问题
* 避免因创建大量对象而导致的内存溢出问题。
* 通过共享对象，提高内存使用效率。
###使用场景
* 当系统中存在大量相似或相同的对象。
* 对象的创建和销毁成本较高。
* 对象的状态可以外部化，即对象的部分状态可以独立于对象本身存在。
###实现方式
* 定义享元接口：创建一个享元接口，规定可以共享的状态。
* 创建具体享元类：实现该接口的具体类，包含内部状态。
* 使用享元工厂：创建一个工厂类，用于管理享元对象的创建和复用。
###关键代码
* HashMap：使用哈希表存储已经创建的享元对象，以便快速检索。
###应用实例
* Java中的String对象：字符串常量池中已经存在的字符串会被复用。
* 数据库连接池：数据库连接被复用，避免频繁创建和销毁连接。
###优点
* 减少内存消耗：通过共享对象，减少了内存中对象的数量。
* 提高效率：减少了对象创建的时间，提高了系统效率。
###缺点
* 增加系统复杂度：需要分离内部状态和外部状态，增加了设计和实现的复杂性。
* 线程安全问题：如果外部状态处理不当，可能会引起线程安全问题。
###使用建议
* 在创建大量相似对象时考虑使用享元模式。
* 确保享元对象的内部状态是共享的，而外部状态是独立于对象的。
###注意事项
* 状态分离：明确区分内部状态和外部状态，避免混淆。
* 享元工厂：使用享元工厂来控制对象的创建和复用，确保对象的一致性和完整性。
###结构
享元模式包含以下几个核心角色：

* 享元工厂（Flyweight Factory）:

负责创建和管理享元对象，通常包含一个池（缓存）用于存储和复用已经创建的享元对象。
* 具体享元（Concrete Flyweight）:

实现了抽象享元接口，包含了内部状态和外部状态。内部状态是可以被共享的，而外部状态则由客户端传递。
* 抽象享元（Flyweight）:

定义了具体享元和非共享享元的接口，通常包含了设置外部状态的方法。
* 客户端（Client）:

使用享元工厂获取享元对象，并通过设置外部状态来操作享元对象。客户端通常不需要关心享元对象的具体实现。